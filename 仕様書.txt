# 『LIAR'S AUCTION』 オンライン対戦ゲーム開発要件定義書

## 1. プロジェクト概要

* **ゲームタイトル:** LIAR'S AUCTION（ライアーズ・オークション）
* **ジャンル:** ブラフ・オークションカードゲーム
* **プラットフォーム:** Webブラウザ（PC/スマホ対応想定）
* ※アプリインストール不要で、URL共有だけで友人と遊べる形式


* **プレイ人数:** 5人（2～5人変動）
* **通信:** リアルタイム通信（WebSocket等）必須

## 2. ゲームの基本仕様（データ構造）

### 2.1 カードセット（定数データ）

* **通貨単位:** 「億」
* **お金カード（1人あたり初期手札）:**
* 1000億 × 2枚
* 500億 × 3枚
* 100億 × 5枚
* 
**合計:** 4000億（10枚） 




* 
**商品カード（全10種からランダム5枚使用）:** 


* 通常カード: 3pt, 2pt, 1ptなど
* 特殊: 未公開株（0/4pt）, 大暴落（Re）



### 2.2 ゲーム進行フロー

全5ラウンド。各ラウンドは以下のフローで進行する。

1. 
**ラウンド開始:** 山札から商品カードを1枚公開 。


2. **入札フェーズ（ターン制）:** 親から順に行動。
* **行動A：入札（Raise）**
* 前のプレイヤーの「宣言額」より高い額を宣言する 。


* **【システム重要】** クライアント側で「宣言額」と「実際に提出するカード（裏向き）」を選択して送信する。
* 
※宣言額と提出カードの合計が一致しなくても送信可能（嘘OK） 。




* **行動B：パス（Fold）**
* このラウンドから降りる。
* 場に出していた自分のお金カードが全て手札に戻る 。




* **行動C：ダウト（Doubt）**
* 直前のプレイヤーが入札した場合のみ選択可能 。


* ※「パス」が続いた場合でも、入札の直後であればダウト可能か？（要確認）




3. **判定・決着処理:**
* **パターン1：ダウト発生**
* 直前の入札者の裏向きカードを公開。
* 
**成功（嘘だった）:** `提出額 < 宣言額` 


* 入札者の提出カード → ゲームから除外（没収） 。


* ダウトした人 → 商品を獲得 。


* 次ラウンドの親 → ダウトした人 。




* 
**失敗（本当だった）:** `提出額 >= 宣言額` 


* 入札者 → 提出カードを除外（支払い）、商品を獲得 。


* ダウトした人 → 自分が場に出していたカードを没収（未入札なら手札から500億没収） 。


* 次ラウンドの親 → 入札者 。






* 
**パターン2：全員パス（残り1人）** 


* 残った1人が落札権利を得る。
* カード公開チェック：
* `提出額 >= 宣言額` なら落札（支払い＆獲得）。
* 
`提出額 < 宣言額` （自己破産）なら、商品は誰のものにもならず破棄 。








4. **ゲーム終了:** 5ラウンド終了後、集計へ。

## 3. 特殊処理の実装要件

3.1 未公開株（0/4）の処理 

* ゲーム終了時、システム側でランダム（50%）に0ptまたは4ptに変換して集計する。
* 判定の際にはコイントスをする

3.2 大暴落（Re）の処理 

* このカードを獲得したプレイヤーには、ゲーム終了時に**「売却選択ダイアログ」**を表示する。
* **選択肢:**
* `売却する` → 勝利条件ロジックを「最小ポイント勝利（昇順ソート）」に変更。
* `売却しない` → 通常通り「最大ポイント勝利（降順ソート）」のまま。



## 4. 画面（UI）構成案

### 4.1 ロビー画面

* 「部屋を作る」ボタン（Room ID発行）
* 「部屋に入る」ボタン（Room ID入力）
* 待機所（メンバー4人揃ったら開始）

### 4.2 ゲームメイン画面

* **中央エリア:**
* 現在の商品カード
* 現在の入札額（High Bid）
* 現在の入札者名
* 場に出ている裏向きカードの束（視覚的に誰が出しているか分かること）


* **手札エリア（自分のみ表示）:**
* 所持金カード一覧（ドラッグ＆ドロップまたはタップ選択）
* 所持金合計表示


* **アクションエリア:**
* スライダーまたは入力欄で「宣言額」を指定
* ボタン：「入札する」「パス」「ダウト」



### 4.3 結果表示画面

* 各プレイヤーの獲得商品一覧
* ポイント合計
* 順位発表

## 5. 開発者への確認事項（Q&A）

* **Q1. プレイ人数:** 4人未満（3人など）でも遊べるようにしますか？その場合、お金やカード枚数は調整しますか？
* **Q2. ダウト失敗時のペナルティ:** 「未入札なら手札から500億没収」とありますが、もし手札に500億カードがない（1000億しかない、または100億しかない）場合はどう処理しますか？
* *（案：あるなら500億、なければ1000億、それもなければ100億×5など、自動処理ロジックが必要）*


* **Q3. 時間制限:** 1ターンあたりの思考時間は設けますか？（長考防止のため30秒など）

---